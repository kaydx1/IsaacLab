<mujoco model="skateboard_mass_block">
  <compiler angle="radian" coordinate="local"/>
  <option gravity="0 0 -9.81" integrator="RK4" solver="Newton" impratio="100"/>

  <default>
    <default class="skateboard">
      <joint damping="10" armature="0.1"/>
      
      <!-- <default class="visual">
        <geom type="mesh" contype="0" conaffinity="0" group="2" material="black" />
      </default> -->
      <default class="skateboard_collision">
        <geom contype="0" conaffinity="3" group="3" mass="0" density="0" />
      </default>

       <default class="collision_mass">
        <geom contype="1" conaffinity="3" group="3" mass="0" density="0" solref="0.01 1.0" solimp="0.95 0.95 0.001 0 1"/>
      </default>


    </default>
  </default>

  <worldbody>

    <body name="deck_base" pos="0 0 0.08"> 
      <camera name="desk_cam" mode="targetbody" target="deck_base" pos="0 -5.0 5.0" euler="0.5 0 0" />
      <freejoint/> 
      <!-- deck 本体 -->
       <geom class="visual" type="box" size="0.35 0.125 0.01"  rgba="0.8 0.4 0.1 1" />
      <geom class="skateboard_collision" type="box" friction="2 0.1 0.1" size="0.35 0.125 0.01" priority="1" />
      <site name="deck_site" pos="0 0 0.01" size="0.005" rgba="0 0 1 1"/>
      <inertial pos="0 0 0" mass="2.5" diaginertia="0.052417 0.408667 0.460417"  />

      
      
      <!-- 前 kingpin 铰链结构 -->
      <body name="front_kingpin" pos="0.25 0 -0.05">
        <geom class="visual" type="box" size="0.025 0.05 0.025" pos="0 0 0.025" rgba="0.4 0.4 0.4 1" />
        <joint name="front_truck_joint" type="hinge" axis="0 0 1" limited="true"
                range="-0.5 0.5" stiffness="200" damping="2"/>
        <inertial pos="0 0 -0.015" mass="0.4" diaginertia="0.000667 0.000667 0.000667"/>

        <body name="front_truck" pos="0 0 -0.0">
          <joint name="front_steer" type="hinge"
                axis="1 0 0"  limited="true" range="-0.2 0.2"/>
          <geom class="visual" type="cylinder" size="0.01 0.08" rgba="0.4 0.4 0.4 1" euler="1.570796 0 0"/>
          <inertial pos="0 0 -0.01" mass="0.2" diaginertia="1e-05 6.5e-05 6.5e-05"/>

          <!-- 左前轮 -->
          <body name="front_left_wheel" pos="0 0.07 0.0">
            <joint name="front_left_wheel_joint" type="hinge" axis="0 1 0"  />
            <geom class="visual" type="cylinder" size="0.03 0.01" 
                  quat="0 0 0.7071 0.7071" rgba="1 0.5 0 1" />
            <geom class="skateboard_collision" type="cylinder" size="0.03 0.01" priority="1"
                  quat="0 0 0.7071 0.7071" 
                  friction="2.0 0.1 5" solref="0.002 1" solimp="0.98 0.98 0.001 0 1"
                  rgba="1 0.5 0 1" />
            <inertial pos="0 0 0" mass="0.3" diaginertia="7.7e-05 0.000135 7.7e-05" />
          </body>

          <!-- 右前轮 -->
          <body name="front_right_wheel" pos="0 -0.07 0.0">
            <joint name="front_right_wheel_joint" type="hinge" axis="0 1 0"  />
             <geom class="visual" type="cylinder" size="0.03 0.01" 
                  quat="0 0 0.7071 0.7071" rgba="1 0.5 0 1" />
            <geom class="skateboard_collision" type="cylinder" size="0.03 0.01" priority="1"
                  quat="0 0 0.7071 0.7071" 
                  friction="2.0 0.1 5" solref="0.002 1" solimp="0.98 0.98 0.001 0 1"
                  rgba="1 0.5 0 1" />
            <inertial pos="0 0 0" mass="0.3" diaginertia="7.7e-05 0.000135 7.7e-05" />
          </body>
        </body>
      </body>

      <!-- 后 kingpin 铰链结构 -->
      <body name="rear_kingpin" pos="-0.25 0 -0.05">
         <geom class="visual" type="box" size="0.025 0.05 0.025" pos="0 0 0.025" rgba="0.4 0.4 0.4 1" />
        <joint name="rear_truck_joint" type="hinge" axis="0 0 1" limited="true"
                range="-0.5 0.5" stiffness="200" damping="2"/>
        <inertial pos="0 0 -0.015" mass="0.4" diaginertia="0.000667 0.000667 0.000667"/>

        <body name="rear_truck" pos="0 0 -0.0">
          <joint name="rear_steer" type="hinge"
               axis="1 0 0" limited="true" range="-0.2 0.2" frictionloss="0.1" />
          <geom class="visual" type="cylinder" size="0.01 0.08" rgba="0.4 0.4 0.4 1"  euler="1.570796 0 0"/>
          <inertial pos="0 0 -0.015" mass="0.2" diaginertia="1e-05 6.5e-05 6.5e-05"/>

          <!-- 左后轮 -->
          <body name="rear_left_wheel" pos="0 0.07 0.0">
            <joint name="rear_left_wheel_joint" type="hinge" axis="0 1 0"  />
            <geom class="visual" type="cylinder" size="0.03 0.01" 
                  quat="0 0 0.7071 0.7071" rgba="1 0.5 0 1" />
            <geom class="skateboard_collision" type="cylinder" size="0.03 0.01" priority="1"
                  quat="0 0 0.7071 0.7071" 
                  friction="2.0 0.1 5" solref="0.002 1" solimp="0.98 0.98 0.001 0 1"
                  rgba="1 0.5 0 1" />
            <inertial pos="0 0 0" mass="0.3" diaginertia="7.7e-05 0.000135 7.7e-05" />
          </body>

          <!-- 右后轮 -->
          <body name="rear_right_wheel" pos="0 -0.07 0.0">
            <joint name="rear_right_wheel_joint" type="hinge" axis="0 1 0"   />
            <geom class="visual" type="cylinder" size="0.03 0.01" 
                  quat="0 0 0.7071 0.7071" rgba="1 0.5 0 1" />
            <geom class="skateboard_collision" type="cylinder" size="0.03 0.01" priority="1"
                  quat="0 0 0.7071 0.7071" 
                  friction="2.0 0.1 5" solref="0.002 1" solimp="0.98 0.98 0.001 0 1"
                  rgba="1 0.5 0 1" />
            <inertial pos="0 0 0" mass="0.3" diaginertia="7.7e-05 0.000135 7.7e-05" />
          </body>
        </body>
      </body>
    </body>
  </worldbody>

  <equality>
    <joint name="front_steer_to_truck"
         joint1="front_truck_joint"
         joint2="front_steer"
         polycoef="0 0.677 0 0 0"
         active="true"/>

    <joint name="rear_steer_to_truck"
         joint1="rear_truck_joint"
         joint2="rear_steer"
         polycoef="0 -0.677 0 0 0"
         active="true"/>    

  </equality>

  
</mujoco>